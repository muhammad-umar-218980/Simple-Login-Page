<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Sign In</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<script>
		tailwind.config = {
			theme: {
				extend: {
					colors: {
						primary: '#6366f1',
						secondary: '#8b5cf6'
					}
				}
			}
		}
	</script>
	<style>
		@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

		body {
			font-family: 'Poppins', sans-serif;
		}

		.form-container {
			background: linear-gradient(145deg, #ffffff, #f0f0f0);
			box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
			border-radius: 16px;
		}

		.btn-gradient {
			background: linear-gradient(135deg, #6366f1, #8b5cf6);
			transition: all 0.3s ease;
		}

		.btn-gradient:hover {
			background: linear-gradient(135deg, #4f46e5, #7c3aed);
			transform: translateY(-2px);
		}

		input:focus {
			box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
		}

		.input-icon {
			position: absolute;
			left: 0.75rem;
			top: 50%;
			transform: translateY(-50%);
			color: #9ca3af;
		}
	</style>
</head>

<body class="bg-gradient-to-br from-indigo-50 to-purple-50 min-h-screen flex items-center justify-center p-4">
	<div class="form-container w-full max-w-md p-6 sm:p-8">
		<div class="text-center mb-8">
			<div class="mx-auto bg-indigo-100 w-16 h-16 rounded-full flex items-center justify-center mb-4">
				<i class="fa-solid fa-lock text-primary text-2xl"></i>
			</div>
			<h1 class="text-3xl font-bold text-gray-800">Welcome Back</h1>
			<p class="text-gray-500 mt-2">Sign in to continue</p>
		</div>

		<form action="/login" method="POST" id="loginForm">
			<div class="space-y-5">
				<div>
					<label class="block text-gray-700 mb-2 font-medium">Email</label>
					<div class="relative">
						<i class="fa-solid fa-envelope input-icon"></i>
						<input type="email" name="email" id="email" required
							placeholder="john@example.com"
							class="w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:border-primary">
					</div>
				</div>

				<div>
					<label class="block text-gray-700 mb-2 font-medium">Password</label>
					<div class="relative">
						<i class="fa-solid fa-lock input-icon"></i>
						<input type="password" name="password" id="password" required
							placeholder="••••••••"
							class="w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:border-primary">
					</div>
				</div>

				<div class="flex items-center justify-between">
					<div class="flex items-center">
						<input type="checkbox" id="remember"
							class="h-4 w-4 text-primary rounded focus:ring-primary">
						<label for="remember" class="ml-2 text-gray-600">Remember me</label>
					</div>
					<a href="#" class="text-primary text-sm font-medium hover:underline">Forgot
						password?</a>
				</div>

				<button type="submit"
					class="btn-gradient w-full text-white py-3 px-4 rounded-lg font-semibold shadow-lg">
					Sign In
				</button>
			</div>
		</form>

		<div class="mt-8">
			<div class="relative">
				<div class="absolute inset-0 flex items-center">
					<div class="w-full border-t border-gray-200"></div>
				</div>
				<div class="relative flex justify-center text-sm">
					<span class="px-2 bg-white text-gray-500">Or continue with</span>
				</div>
			</div>

			<div class="grid grid-cols-3 gap-3 mt-6">
				<button
					class="bg-white border border-gray-200 rounded-lg py-2 px-4 flex justify-center hover:bg-gray-50">
					<i class="fa-brands fa-google text-red-500"></i>
				</button>
				<button
					class="bg-white border border-gray-200 rounded-lg py-2 px-4 flex justify-center hover:bg-gray-50">
					<i class="fa-brands fa-facebook text-blue-600"></i>
				</button>
				<button
					class="bg-white border border-gray-200 rounded-lg py-2 px-4 flex justify-center hover:bg-gray-50">
					<i class="fa-brands fa-github text-gray-800"></i>
				</button>
			</div>
		</div>

		<div class="mt-8 text-center">
			<p class="text-gray-600">
				Don't have an account?
				<a href="register.html" class="text-primary font-semibold hover:underline ml-1">
					Sign Up
				</a>
			</p>
		</div>
	</div>

	<script>
		const emailInput = document.getElementById('email');
		let emailError = null;

		emailInput.addEventListener('blur', async function () {
			const email = this.value.trim();
			if (!email) return;

			if (emailError) {
				emailError.remove();
				emailError = null;
			}

			try {
				const response = await fetch('/check-email', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/x-www-form-urlencoded',
					},
					body: `email=${encodeURIComponent(email)}`
				});

				const data = await response.text();
				const emailExists = !data.includes('not found');

				if (!emailExists) {
					emailError = document.createElement('div');
					emailError.className = 'text-red-500 text-sm mt-1';
					emailError.textContent = 'Email not found';

					const emailContainer = this.parentNode;
					emailContainer.parentNode.insertBefore(emailError, emailContainer.nextSibling);
				}
			} catch (error) {
				console.error('Error checking email:', error);
			}
		});

		emailInput.addEventListener('input', function () {
			if (emailError) {
				emailError.remove();
				emailError = null;
			}
		});
	</script>
</body>

</html>